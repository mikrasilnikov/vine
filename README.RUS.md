
# Vine
Vine - это инструмент для DJ и любителей электронной музыки, который позволяет быстро отслушивать
превью новых треков из популярных музыкальных магазинов (Beatport и Traxsource). Программа экономит
время, скачивая превью, и дает возможность использовать свой плеер для прослушивания.

Если вы вполне довольны вашим любимым стриминговым сервисом и не понимаете, зачем вообще нужно в 
наши дни слушать какие-то превью в каких-то музыкальных магазинах, то вы нормальный человек и это 
все не для вас.

### В чем проблема?
Их много.
- Для того чтобы принять решение по поводу трека, DJ достаточно всего нескольких секунд звучания.
  В то время как при использовании онлайн-плеера может требоваться до 10 секунд
  только для того, чтобы загрузить превью. Если, например, требуется отслушать 500 треков (вполне
  обычное количество новинок за день), то к 30 минутам работы придется добавить еще **целый час**
  ожидания.
- Похоже, что контент, публикуемый в онлайн магазинах, не модерируется. Как минимум половина треков -
  это гадость по любым стандартам. Разумеется часть хороших треков попадает в чарты, но остальные
  оказываются под кучей мусора.
- Разные сайты выкладывают одну и ту же музыку. Некоторые треки выходят на разных лейблах.
  В итоге одна композиция может быть опубликована десяток раз. Никто не в состоянии запомнить сотни тысяч
  названий, чтобы не слушать одно и то же.

Все это заставляет многих DJ-ев полагаться на чарты и подборки, что часто делает звучание первых
вторичным.

### Как Vine решает эти проблемы?
- Vine скачивает превью за определенный период чтобы можно было послушать их быстро офлайн.
- Vine позволяет заносить лейблы в черный список, чтобы игнорировать заведомо плохой контент.
- Vine хранит базу данных обработанной музыки и не скачивает одно и то же дважды.

### Окей, как это попробовать?
- Установите Java версии 11 или выше для своей операционной системы.
  ```
  https://adoptopenjdk.net/
  ```
- Скачайте релиз Vine и распакуйте его в отдельную папку.
- Запустите
  ```
  java -jar vine.jar --genres=house
  ```
  Это скачает превью треков в стиле house в папку `previews/{date}` за позавчера.

  ![alt text](https://github.com/mikrasilnikov/PreviewsDownloader2/blob/main/img/get-house.gif "Downloading house")


#### Но я не слушаю house!
Параметр `--genres` позволяет указать один или несколько стилей через запятую. Вот пример
команды для скачивания превью всех поддерживаемых стилей:
```
java -jar vine.jar --genres=house,tech,funky,nudisco,soulful,soulfunk,deep,progressive,melodic,afro,techno,lounge,minimal,dnb
```
#### Но я хочу за другую дату!
Для указания периода используется параметр `--date`.
Можно выбирать как конкретную дату
  ```
  java -jar vine.jar --genres=house --date=2021-06-01
  ```
так и диапазон
  ```
  java -jar vine.jar --genres=house --date=2021-06-01,2021-06-07
  ```

Границы диапазонов указываются включительно.
В примере выше превью будут скачиваться и за 1-е, и за 7-е число.
К сожалению, на данный момент, у Beatport-а есть проблема с выдачей результатов за большие диапазоны.
См. примечание ниже о диапазонах дат.

#### Каждый раз надо это все печатать руками?
Это не обязательно. В архиве с программой есть файлы `run.bat` и `run.sh` для разных операционных систем.
Можно указать в них нужные стили и просто менять дату перед запуском.




### Ограничения для диапазонов дат

- На текущий момент (2021-06-17) beatport некорректно отображает списки длиной более 10000 элементов. При проявлении
  этой проблемы на индикаторе прогресса будут отображаться восклицательные знаки:
  

  ![alt text](https://github.com/mikrasilnikov/PreviewsDownloader2/blob/main/img/beatport-10k.png "beatport 10k bug")
  
  а в логах появятся записи

  ```
  Got empty last page of 01-my-beatport. Beatport 10K bug?
  Empty intermediate page (Beatport 10K bug?): Right(https://www.beatport.com/tracks/all?per-page=150&start-date=2021-01-01&end-date=2021-01-08&page=67)
  ```
  Поддержка признает наличие проблемы и говорит, что они вовсю работают над этим.
  
- Режим `my` для traxsource использует раздел [Just Added](https://www.traxsource.com/just-added?cn=tracks&ipp=100). 
  В этом разделе не отображаются треки, опубликованные раньше, чем полгода назад. Поэтому если указать более раннюю дату,
  будет выдано сообщение об ошибке
  ```
  Traxsource "Just Added" and "DJ Top 10s" sections do not work on dates earlier then 180 days prior to today.
  Please use more recent date range or remove feeds with urls starting with /just-added or /dj-top-10s
  ```